(function(e){function t(t){for(var a,o,r=t[0],c=t[1],l=t[2],d=0,p=[];d<r.length;d++)o=r[d],n[o]&&p.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],a=!0,r=1;r<s.length;r++){var c=s[r];0!==n[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},n={app:0},i=[];function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"16e1":function(e,t,s){e.exports=s.p+"img/16pxlogout.31854879.svg"},"23c7":function(e,t,s){},3606:function(e,t,s){},"36be":function(e,t,s){e.exports=s.p+"img/menu.b5c2a6b1.svg"},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var a=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},i=[],o={components:{}},r=o,c=(s("5c0b"),s("2877")),l=Object(c["a"])(r,n,i,!1,null,null,null),u=l.exports,d=s("8c4f"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"root"},[a("img",{staticClass:"backup",attrs:{src:s("b15e"),alt:"backup"},on:{click:e.pageBackUp}}),a("div",{staticClass:"main-content"},[e._m(0),a("el-input",{staticClass:"row",attrs:{type:"",placeholder:"请输入用户名"},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),a("el-input",{staticClass:"row",attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.passWord,callback:function(t){e.passWord=t},expression:"passWord"}}),a("el-button",{staticClass:"row",attrs:{type:"info",plain:""},on:{click:function(t){return e.login()}}},[e._v("登录")])],1)])},m=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row login-icon"},[a("img",{attrs:{src:s("eab8"),alt:"login"}})])}],v=s("795b"),f=s.n(v),h=s("bc3a"),g=s.n(h),b=function(e,t,s){var a="http://localhost:3000"+e;return"GET"===t?g.a.get(a).then(function(e){return f.a.resolve(e)}).catch(function(e){return console.log(e),f.a.resolve(e)}):"POST"===t?g.a.post(a,s).then(function(e){return console.log(e),f.a.resolve(e)}).catch(function(e){return console.log(e),f.a.resolve(e)}):void 0},y={name:"login",data:function(){return{userName:"",passWord:""}},methods:{login:function(){var e=this;b("/users/login","POST",{userName:this.userName,passWord:this.passWord}).then(function(t){console.log(t),localStorage.setItem("token",t.data.token),"found"===t.data.result?e.$router.push({path:"/"}):"notFound"===t.data.result&&e.$message({message:"用户名或密码错误",customClass:"messageBox"})})},pageBackUp:function(){this.$router.push({path:"/"})}},components:{}},w=y,_=(s("6079"),Object(c["a"])(w,p,m,!1,null,"5d0aa096",null)),k=_.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"root"},[a("header",{staticClass:"top-bar"},[e._m(0),a("div",{staticClass:"state"},[e.user?a("ul",{staticClass:"pc-menu"},[a("li",[e._v(e._s(this.user))]),"master"===e.userType?a("li",{staticClass:"user-type",on:{click:e.showManageTag}},[e._v("[管理员权限]")]):e._e(),a("li",{staticClass:"log-btn",on:{click:e.logout}},[a("img",{attrs:{src:s("16e1"),alt:"logout"}}),a("span",[e._v("退出登陆")])])]):a("ul",{staticClass:"pc-menu"},[a("li",{staticClass:"log-btn",on:{click:e.goToLogin}},[e._v("点击登录")])]),a("div",{staticClass:"mobile-menu-btn mobile-show",on:{click:e.toggleMobileMenu}},[a("img",{attrs:{src:s("36be"),alt:"mobile-menu"}})])])]),a("div",{staticClass:"mobile-nav-bar mobile-show",class:{mobileMenuShow:!e.showMobileMenu}},[e.user?a("ul",[a("li",[e._v(e._s(this.user)),"master"===e.userType?a("span",{staticClass:"user-type",on:{click:e.showManageTag}},[e._v("[管理员权限]")]):e._e()]),a("li",{staticClass:"log-btn",on:{click:e.logout}},[a("img",{attrs:{src:s("16e1"),alt:"logout"}}),a("span",{staticStyle:{"font-size":"17px"}},[e._v("退出登陆")])])]):a("ul",[a("li",{on:{click:e.goToLogin}},[e._v("点击登陆")])])]),e.user?a("div",{staticClass:"operation-area"},[a("div",{staticClass:"device-btn"},[a("span",{staticClass:"device-detail"},[e._v("「一号设备」 当前状态："+e._s(e.IO1Status?"开启":"关闭")+" ")]),a("el-button",{attrs:{type:"info"},on:{click:function(t){return e.setDeviceStatus("device1")}}},[e._v(e._s(e.IO1Status?"关闭":"开启"))])],1),a("div",{staticClass:"device-btn"},[a("span",{staticClass:"device-detail"},[e._v("「二号设备」 当前状态："+e._s(e.IO2Status?"开启":"关闭")+" ")]),a("el-button",{attrs:{type:"info"},on:{click:function(t){return e.setDeviceStatus("device2")}}},[e._v(e._s(e.IO2Status?"关闭":"开启"))])],1),a("div",{staticClass:"device-btn"},[a("span",{staticClass:"device-detail"},[e._v("「直流电机」 当前状态："+e._s(e.motorIsOn?"开启":"关闭")+" ")]),a("el-button",{attrs:{type:"info"},on:{click:function(t){return e.setDeviceStatus("device3")}}},[e._v(e._s(e.motorIsOn?"关闭":"开启"))])],1),a("div",{staticClass:"device-btn"},[a("span",{staticClass:"device-detail"},[e._v("「电机转速」 当前状态："+e._s(e.motorIsOn?e.isSlow?"慢速":"快速":"——")+" ")]),a("el-button",{attrs:{type:"info",disabled:!e.motorIsOn},on:{click:function(t){return e.setDeviceStatus("speed")}}},[e._v("切换")])],1),a("div",{staticClass:"device-btn"},[a("span",{staticClass:"device-detail"},[e._v("「电机转向」 当前状态："+e._s(e.motorIsOn?e.isForward?"正向":"反向":"——")+" ")]),a("el-button",{attrs:{type:"info",disabled:!e.motorIsOn},on:{click:function(t){return e.setDeviceStatus("direction")}}},[e._v("切换")])],1)]):e._e(),e.user?a("div",{attrs:{id:"number-bar"}},[e._v("\n        温度值："+e._s(e.temperature)+"°C     湿度值："+e._s(e.humidity)+"%"),a("br"),a("span",{staticClass:"time-stamp"},[e._v(e._s(e.timeStamp))])]):e._e(),e.user?a("div",{ref:"chartContainner",staticClass:"operation-area",attrs:{id:"chart"}}):e._e(),e.user?e._e():a("div",{staticClass:"notice"},[e._v("\n        请登陆\n    ")]),a("el-dialog",{attrs:{title:"管理员权限",visible:e.manageTagShow,center:!0,fullscreen:!0},on:{"update:visible":function(t){e.manageTagShow=t}}},[a("el-dropdown",{on:{command:e.setOpType}},[a("span",{staticClass:"el-dropdown-link"},[e._v("\n                "+e._s(e.manageOpType)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"修改密码"}},[e._v("修改密码")]),a("el-dropdown-item",{attrs:{command:"添加用户"}},[e._v("添加用户")]),a("el-dropdown-item",{attrs:{command:"删除用户"}},[e._v("删除用户")])],1)],1),a("div",{staticClass:"input-box"},[a("div",{staticClass:"input-item"},[e._v("\n                    要编辑的用户名："),a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.inputUserName,callback:function(t){e.inputUserName=t},expression:"inputUserName"}})],1),a("div",{staticClass:"input-item"},[e._v("\n                    密码："),a("el-input",{attrs:{disabled:"删除用户"===e.manageOpType,placeholder:"请输入密码"},model:{value:e.inputPassWord,callback:function(t){e.inputPassWord=t},expression:"inputPassWord"}})],1),a("div",{staticClass:"input-item"},[e._v("\n                    账户类型："),a("el-radio",{attrs:{disabled:"添加用户"!==e.manageOpType,label:"master"},model:{value:e.inputUserType,callback:function(t){e.inputUserType=t},expression:"inputUserType"}},[e._v("master")]),a("el-radio",{attrs:{disabled:"添加用户"!==e.manageOpType,label:"worker"},model:{value:e.inputUserType,callback:function(t){e.inputUserType=t},expression:"inputUserType"}},[e._v("worker")])],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.manageTagShow=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editUserInfo}},[e._v("确 定")])],1)],1)],1)},O=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("h1",[e._v("Remote Monitoring System")])])}],T=s("5d73"),C=s.n(T),I=s("313e"),x={name:"operation",data:function(){return{user:"",userType:"",showMobileMenu:!1,manageTagShow:!1,manageOpType:"修改密码",inputUserName:"",inputPassWord:"",inputUserType:"",IO1Status:!1,IO2Status:!1,motorIsOn:!1,isSlow:!1,isForward:!1,temperature:"",humidity:"",timeStamp:""}},mounted:function(){var e=localStorage.getItem("token"),t=this;e&&(g.a.defaults.headers.common["token"]=e,b("/users/verify","GET").then(function(e){200===e.status&&(t.user=e.data.userName,t.userType=e.data.type,localStorage.setItem("token",e.data.token))})),b("/device/find","GET").then(function(e){if(200===e.status){var s=e.data,a=!0,n=!1,i=void 0;try{for(var o,r=C()(s);!(a=(o=r.next()).done);a=!0){var c=o.value;switch(c.id){case"device1":t.IO1Status=c.status;break;case"device2":t.IO2Status=c.status;break;case"device3":t.motorIsOn=c.status,t.isSlow=c.isSlow,t.isForward=c.isForward;break}}}catch(l){n=!0,i=l}finally{try{a||null==r.return||r.return()}finally{if(n)throw i}}t.drawLine()}})},methods:{logout:function(){localStorage.removeItem("token"),this.goToLogin()},goToLogin:function(){this.$router.push({path:"/login"})},toggleMobileMenu:function(){this.showMobileMenu=!this.showMobileMenu},showManageTag:function(){this.manageTagShow=!this.manageTagShow},setOpType:function(e){this.manageOpType=e},editUserInfo:function(){var e,t=this,s={userName:this.inputUserName,passWord:this.inputPassWord,type:this.inputUserType};switch(this.manageOpType){case"修改密码":e="/users/update",delete s.type;break;case"添加用户":e="/users/insert";break;case"删除用户":e="/users/delete",delete s.passWord,delete s.type;break}b(e,"POST",s).then(function(e){"succeed"===e.data.result&&(t.manageTagShow=!1,t.showMobileMenu=!1,t.$message({message:"操作成功",type:"success",customClass:"messageBox"}))})},setDeviceStatus:function(e){var t,s,a;switch(e){case"device1":t=!this.IO1Status;break;case"device2":t=!this.IO2Status;break;case"device3":t=!this.motorIsOn;break;case"speed":s={id:"device3",isSlow:!this.isSlow};break;case"direction":a={id:"device3",isForward:!this.isForward}}var n="/device/setDevice",i=this,o={id:e,status:t};b(n,"POST",s||a||o).then(function(t){if("succeed"===t.data)switch(e){case"device1":i.IO1Status=!i.IO1Status;break;case"device2":i.IO2Status=!i.IO2Status;break;case"device3":i.motorIsOn=!i.motorIsOn;break;case"speed":i.isSlow=!i.isSlow;break;case"direction":i.isForward=!i.isForward}else i.$message({message:"操作失败",type:"warning",customClass:"messageBox",duration:1500})})},drawLine:function(){var e=[],t=[],s={title:{text:"温湿度(%)"},legend:{data:["温度","湿度"]},tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:[1,2,3,4,5,6]},yAxis:{type:"value"},series:[{name:"温度",type:"line",data:e},{name:"湿度",type:"line",data:t}]},a=this.$refs.chartContainner,n=this;if(a){var i=I.init(a);i.setOption(s),setInterval(function(){b("/device/read","GET").then(function(s){s.data.temperature&&s.data.humidity&&(n.temperature=s.data.temperature,n.humidity=s.data.humidity,n.timeStamp=new Date,6===e.length&&e.shift(),e.push(s.data.temperature),6===t.length&&t.shift(),t.push(s.data.humidity),i.setOption({series:[{seriesIndex:0,data:e},{seriesIndex:1,data:t}]}))})},2e3)}}}},M=x,U=(s("ba85"),Object(c["a"])(M,S,O,!1,null,"763bc2df",null)),P=U.exports;a["default"].use(d["a"]);var N=new d["a"]({routes:[{path:"/login",name:"login",component:k},{path:"/",name:"operation",component:P}]}),W=s("2f62");a["default"].use(W["a"]);var $=new W["a"].Store({state:{},mutations:{},actions:{}}),j=s("5c96"),E=s.n(j);a["default"].use(E.a),a["default"].config.productionTip=!1,new a["default"]({router:N,store:$,render:function(e){return e(u)}}).$mount("#app")},"5c0b":function(e,t,s){"use strict";var a=s("5e27"),n=s.n(a);n.a},"5e27":function(e,t,s){},6079:function(e,t,s){"use strict";var a=s("3606"),n=s.n(a);n.a},b15e:function(e,t,s){e.exports=s.p+"img/backup.baf58b4d.svg"},ba85:function(e,t,s){"use strict";var a=s("23c7"),n=s.n(a);n.a},eab8:function(e,t,s){e.exports=s.p+"img/clickToLogin.1ff3b28d.svg"}});
//# sourceMappingURL=app.f59be3c9.js.map