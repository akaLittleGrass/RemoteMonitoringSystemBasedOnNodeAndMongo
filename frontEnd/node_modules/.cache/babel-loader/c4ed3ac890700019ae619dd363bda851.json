{"remainingRequest":"/Users/weihaoyang/f2e/remoteMonitoringWeb/node_modules/babel-loader/lib/index.js!/Users/weihaoyang/f2e/remoteMonitoringWeb/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/weihaoyang/f2e/remoteMonitoringWeb/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/weihaoyang/f2e/remoteMonitoringWeb/src/views/operation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/weihaoyang/f2e/remoteMonitoringWeb/src/views/operation.vue","mtime":1552114433705},{"path":"/Users/weihaoyang/f2e/remoteMonitoringWeb/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weihaoyang/f2e/remoteMonitoringWeb/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/weihaoyang/f2e/remoteMonitoringWeb/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weihaoyang/f2e/remoteMonitoringWeb/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  name: 'operation',\n  data: function data() {\n    return {\n      user: '',\n      userType: '',\n      showMobileMenu: false,\n      manageTagShow: false,\n      manageOpType: '修改密码',\n      inputUserName: '',\n      inputPassWord: '',\n      inputUserType: ''\n    };\n  },\n  mounted: function mounted() {\n    var token = localStorage.getItem('token');\n    var that = this;\n\n    if (token) {\n      axios.defaults.headers.common['token'] = token;\n      axios.get('http://localhost:3000/users/verify').then(function (response) {\n        if (response.status === 200) {\n          that.user = response.data.userName;\n          that.userType = response.data.type;\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  },\n  methods: {\n    logout: function logout() {\n      localStorage.removeItem('token');\n      this.goToLogin();\n    },\n    goToLogin: function goToLogin() {\n      this.$router.push({\n        path: '/login'\n      });\n    },\n    toggleMobileMenu: function toggleMobileMenu() {\n      this.showMobileMenu = !this.showMobileMenu;\n    },\n    showManageTag: function showManageTag() {\n      this.manageTagShow = !this.manageTagShow;\n    },\n    setOpType: function setOpType(type) {\n      this.manageOpType = type;\n    },\n    editUserInfo: function editUserInfo() {\n      var url;\n      var that = this;\n      var data = {\n        userName: this.inputUserName,\n        passWord: this.inputPassWord,\n        type: this.inputUserType\n      };\n\n      switch (this.manageOpType) {\n        case '修改密码':\n          url = 'http://localhost:3000/users/update';\n          delete data.type;\n          break;\n\n        case '添加用户':\n          url = 'http://localhost:3000/users/insert';\n          break;\n\n        case '删除用户':\n          url = 'http://localhost:3000/users/delete';\n          delete data.passWord;\n          delete data.type;\n          break;\n      }\n\n      axios.post(url, data).then(function (res) {\n        if (res.data.result === 'succeed') {\n          that.manageTagShow = false;\n          that.showMobileMenu = false;\n          that.$message({\n            message: '操作成功',\n            type: 'success',\n            customClass: 'messageBox'\n          });\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }\n};",{"version":3,"sources":["operation.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"root\">\n        <header class=\"top-bar\">\n            <section class=\"slogan\">\n                Remote Monitoring System\n            </section>\n            <div class=\"state-bar\">\n                <ul v-if=\"user\" class=\"pc-menu\">\n                    <li>{{this.user}}</li>\n                    <li @click=\"showManageTag\" class=\"user-type\" v-if=\"userType === 'master'\">[管理员权限]</li>\n                    <li class=\"log-btn\" @click=\"logout\">\n                        <img src=\"../../dist/img/16pxlogout.svg\" alt=\"logout\">\n                        <span>退出登陆</span>\n                    </li>\n                </ul>\n                <ul v-else class=\"pc-menu\">\n                    <li class=\"log-btn\" @click=\"goToLogin\">点击登录</li>\n                </ul>\n                <div @click=\"toggleMobileMenu\" class=\"mobile-menu-btn mobile-show\">\n                    <img src=\"../../dist/img/menu.svg\" alt=\"mobile-menu\">\n                </div>\n            </div>\n        </header>\n        <div class=\"mobile-nav-bar mobile-show\" :class=\"{mobileMenuShow: !showMobileMenu}\">\n            <ul v-if=\"user\">\n                <li>{{this.user}}<span @click=\"showManageTag\" class=\"user-type\" v-if=\"userType === 'master'\">[管理员权限]</span></li>\n                <li @click=\"logout\" class=\"log-btn\"> <img src=\"../../dist/img/16pxlogout.svg\" alt=\"logout\"><span style=\"font-size:17px;\">退出登陆</span></li>\n            </ul>\n            <ul v-else>\n                <li @click=\"goToLogin\">点击登陆</li>\n            </ul>\n        </div>\n        <el-dialog\n            title=\"管理员权限\"\n            :visible.sync=\"manageTagShow\"\n            :center=\"true\"\n            :fullscreen=\"true\"\n            >\n            <el-dropdown @command=\"setOpType\">\n                <span class=\"el-dropdown-link\">\n                    {{manageOpType}}<i class=\"el-icon-arrow-down el-icon--right\"></i>\n                </span>\n                <el-dropdown-menu slot=\"dropdown\">\n                    <el-dropdown-item command=\"修改密码\">修改密码</el-dropdown-item>\n                    <el-dropdown-item command=\"添加用户\">添加用户</el-dropdown-item>\n                    <el-dropdown-item command=\"删除用户\">删除用户</el-dropdown-item>\n                </el-dropdown-menu>\n            </el-dropdown>\n                <div class=\"input-box\">\n                    <div class=\"input-item\">\n                        要编辑的用户名：<el-input v-model=\"inputUserName\" placeholder=\"请输入用户名\"></el-input>\n                    </div>\n                    <div class=\"input-item\">\n                        密码：<el-input :disabled=\"manageOpType === '删除用户'\" v-model=\"inputPassWord\" placeholder=\"请输入密码\"></el-input>\n                    </div>\n                    <div class=\"input-item\">\n                        账户类型：<el-radio :disabled=\"manageOpType !== '添加用户'\" v-model=\"inputUserType\" label=\"master\">master</el-radio>\n                                <el-radio :disabled=\"manageOpType !== '添加用户'\" v-model=\"inputUserType\" label=\"worker\">worker</el-radio>\n                    </div>\n                </div>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button  @click=\"manageTagShow = false\">取 消</el-button>\n                <el-button  type=\"primary\" @click=\"editUserInfo\" >确 定</el-button>\n            </span>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n    name: 'operation',\n    data(){\n        return{\n            user: '',\n            userType: '',\n            showMobileMenu: false,\n            manageTagShow: false,\n            manageOpType: '修改密码',\n            inputUserName: '',\n            inputPassWord: '',\n            inputUserType: '',\n        }\n    },\n    mounted: function(){\n        const token = localStorage.getItem('token');\n        const that = this;\n        if(token){\n            axios.defaults.headers.common['token'] = token;\n            axios.get('http://localhost:3000/users/verify')\n            .then(function (response) {\n                if(response.status === 200){\n                    that.user = response.data.userName;\n                    that.userType = response.data.type;\n                }   \n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n        }\n    },\n    methods: {\n        logout(){\n            localStorage.removeItem('token');\n            this.goToLogin();\n        },\n        goToLogin(){\n            this.$router.push({  \n                path:'/login',   \n            })\n        },\n        toggleMobileMenu(){\n            this.showMobileMenu = !this.showMobileMenu;\n        },\n        showManageTag(){\n            this.manageTagShow = !this.manageTagShow;\n        },\n        setOpType(type){\n            this.manageOpType = type;\n        },\n        editUserInfo(){\n            let url ; \n            let that = this;\n            let data = {\n                userName: this.inputUserName, \n                passWord: this.inputPassWord,\n                type: this.inputUserType,\n            }\n            switch(this.manageOpType){\n                case '修改密码':\n                url = 'http://localhost:3000/users/update';\n                delete data.type;\n                break;\n                case '添加用户':\n                url = 'http://localhost:3000/users/insert';\n                break;\n                case '删除用户':\n                url = 'http://localhost:3000/users/delete';\n                delete data.passWord;\n                delete data.type;\n                break;\n            }\n            axios.post(url, data).then(function(res){\n                if(res.data.result === 'succeed'){\n                    that.manageTagShow = false;\n                    that.showMobileMenu = false;\n                    that.$message({\n                        message: '操作成功',\n                        type: 'success',\n                        customClass: 'messageBox',\n                    });\n                }\n            }).catch(function(error){\n                console.log(error);\n            });\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n    .root{\n        background-color: #fdfdfd;\n        font: 25px \"Helvetica Neue\", \"Open Sans\", sans-serif;\n    }\n    .top-bar{\n        position: fixed;\n        top: 0;\n        left: 0;\n        background: #eee;\n        width: 100%;\n        height: 55px;\n        z-index: 100;\n        border-bottom: 1px solid #ddd;\n    }\n    .slogan{\n        display: block;\n        position: fixed;\n        top: 2px;\n        margin: 0;\n        padding: 10px 25px;\n        width: auto;\n        border-left: none;\n        z-index: 1;\n        font-weight: 100;\n        color: #444;\n    }\n   .state-bar{\n        color: #444;\n        padding: 12px 4px 0 5%;\n        max-width: 1180px;  \n        height: 100%;\n        position: relative;\n        display: flex;\n        justify-content: flex-end;\n        align-items: flex-start;\n        box-sizing: content-box;\n        ul{\n            padding: 0;\n            margin: 0;\n            right: 0px;\n            z-index: 1000;\n            li{\n                margin: 0 4px 0 4px;\n                list-style: none;\n                // padding: 0;\n                float: left;\n            }\n        }\n   }\n   .user-type{\n        font-size: 15px;\n        padding-top: 6px;\n        cursor: pointer;\n   }\n   .log-btn{\n        cursor: pointer;\n        padding-left: 40px;\n        font-size: 20px;\n   }\n   .mobile-menu-btn{\n       margin-right: 1%;\n       cursor: pointer;\n   }\n   .mobile-show{\n       display: none;\n   }\n   @media screen and (max-width: 750px){\n       .mobile-show{\n           display: block;\n       }\n       .pc-menu{\n           display: none;\n       }\n   }\n   .mobile-nav-bar{\n       position: absolute;\n       top: 57px;\n       width: 100%;\n       ul{\n           list-style: none;\n           li{\n               background-color: #eee;\n               padding: 6px 0 5px 0;\n               margin: 0;\n               font-size: 20px;\n               border-bottom: 1px solid #ccc;\n           }\n       }\n   }\n   .mobileMenuShow{\n       display: none;\n   }\n   .input-box{\n       width: 75%;\n       max-width: 450px;\n       margin: 20px auto;\n       margin-bottom: 0;\n       display: flex;\n       justify-content: center;\n       align-items: center;\n       flex-direction: column;\n   }\n   .input-item{\n       width: 100%;\n       margin: 10px 0;\n   }\n</style>\n\n\n"],"sourceRoot":"src/views"}]}